# 專案功能說明與開發進度

## 網站連接
[前往項目網站](https://900303.xyz/)

## 專案功能說明

### 會員系統
- **註冊與登入**: 
  - 用戶可以註冊新帳號並登入系統管理資料（支援持久化登入功能），在之後訪問時保持登入狀態。
  - **狀態**: 已實現

- **編輯資料**: 
  - 用戶可以更新個人資料，包括用戶名稱、密碼、信箱等。
  - **狀態**: 已實現

- **信箱驗證**: 
  - 用戶在註冊時或註冊後可以驗證信箱，以確保帳號的真實性與安全性。
  - **狀態**: 已實現

- **密碼找回**: 
  - 已驗證信箱的用戶可以通過信箱找回密碼。
  - **狀態**: 已實現

### 文章系統
- **文章撰寫**: 
  - 用戶可以撰寫和發布文章，並使用富文本編輯器進行文章樣式更新。
  - **狀態**: 已實現

- **自動保存編輯進度**: 
  - 在編輯較長的文章時，系統支持自動保存進度，避免資料丟失。
  - **狀態**: 已實現

- **自訂訪問權限**: 
  - 作者可以為每篇文章設置訪問權限，如公開或私人。
  - **狀態**: 已實現

- **個人主頁**: 
  - 提供用戶管理並編輯目前所撰寫的文章總覽。
  - **狀態**: 已實現

### 留言系統
- **回覆文章功能**: 
  - 使用者可以針對文章發表回覆。
  - **狀態**: 已實現

- **編輯留言**: 
  - 使用者可在發表後對留言進行修改或刪除。
  - **狀態**: 已實現

### 搜尋系統
- **全站資料搜索**: 
  - 用戶可以快速查找站內的用戶、文章等資訊。
  - **狀態**: 已實現
 
# 實現方法
### 1. 項目架構
- **框架**: 使用Java Spring框架實現，並採用前後端合一的方案。
- **模板引擎**: 使用Thymeleaf作為前端模板引擎，實現前端頁面的渲染。後端能夠直接傳遞Model給Thymeleaf前端進行處理渲染。
- **層次結構**: 
  - **Controller層**: 負責處理前端的請求，調用服務層來獲取數據，並將結果返回前端。 
  - **Service層**: 主要的業務邏輯處理區塊，進行數據操作及流程管理。 
  - **Repository層**: 使用JPA（Java Persistence API）與資料庫進行交互，實現數據的CRUD操作。

### 2. 資料庫設計
- **MySQL**: 
  - **用戶資料**: 包括用戶名、密碼（經過Argon2加密算法處理）、郵箱、相關憑證（如持久化登入token或是信箱驗證憑證）。
  - **文章資料**: 儲存文章的ID、標題、內容、發布時間、更新時間、作者資訊等。評論資訊也儲存在相關的表中，利用文章ID形成關聯。
- **本地或雲端**: 
  - **圖片儲存**: 文章內容中的圖片根據用戶設置可以存儲在本地文件系統或雲端存儲中(透過rclone進行文件的傳輸)。

### 3. 安全性設置
- **CSRF保護**: 使用Spring Security中的WebSecurityConfigurerAdapter配置CSRF防護機制，防止跨站請求偽造攻擊。
- **用戶驗證與授權**: 
  - 用戶的訪問控制受限於該篇文章的所有權。

## 開發進度

### 2024/8/17:
- **優化**:用戶文章列表按照更新時間排序、整合部分代碼及命名、更改文章內容長度的上限
- **修復**:用戶文章列表分頁跳轉錯誤、錯誤顯示修復

### 2024/5/21:
- **修復**: 持久化登入Token過期時無法登入的問題、重設密碼權限被禁止的問題

### 2024/4/12:
- **修復**: 註冊用戶時時區設定錯誤、註冊時錯誤的表單輸入提示

### 2024/3/9:
- **修復**: Quill編輯器插入連結功能錯誤並關閉插入影片、公式的權限
- **修復**: 排版錯誤

### 2024/3/8:
- **修復**: 首頁爆板、移除網站圖片、修復更多文章跳轉錯誤
- **新增**: 串接API實現天氣資料功能（搭配API限制）
- **優化**: 網頁UI設計

### 2024/3/7:
- **新增**: 用戶時間選擇功能（顯示用戶所在時區）
- **修復**: 非公開或刪除的文章原始圖片不提供閱讀

### 2024/3/5:
- **新增**: 多餘照片檔案清理功能
- **修復**: 自動更新時會造成同張照片重複上傳

### 2024/3/3:
- **新增**: 持久化登入功能、文章發布功能、文章與評論自動保存功能、session最大維持時間、文章內容的最大限制
- **優化**: 文章頁面按更新時間排序、用戶主頁排版、搜尋結果與背景顏色相近問題
- **重構**: 新增文章後端邏輯
- **修復**: 導航欄的錯誤轉跳

### 2024/2/29:
- **修復**: 主頁留言加載過久的問題、用戶分頁被內容阻擋的問題、導航欄的錯誤轉跳
- **新增**: 刪除文章功能

### 2024/2/28:
- **新增**: 評論編輯、刪除功能、評論載入動畫
- **修復**: Linux錯誤上傳配置、重設密碼類型轉換錯誤、新增文章創建失敗時刪除、驗證頁面導航欄錯誤、刪除文章後還會出現在主頁
- **優化**: 註冊密碼的條件達成條件顯示、註冊失敗時保留選單內資訊

### 2024/2/26:
- **新增**: 評論分頁功能、評論資訊顯示、用戶等待動畫
- **修復**: 用戶文章內容為空可以發布的錯誤

### 2024/2/25:
- **修復**: 多張照片無法上傳、Linux設定檔案路徑錯誤、Quill外框被切除的問題、文章列表分頁功能

### 2024/2/23:
- **新增**: 所有文章顯示最大分頁數量限制
- **優化**: 部分功能冗長的代碼、所有頁面UI設計
- **修復**: 搜尋功能錯誤搜尋到隱藏文章問題

### 2024/2/22:
- **新增**: 管理員自定義網站設定檔案
- **重寫**: 新增文章、更新文章、檢視文章與後端交換資料的邏輯、圖片上傳到後端邏輯
- **關閉**: 文章內容預覽功能
- **優化**: 部分頁面UI設計

### 2024/2/20:
- **新增**: 評論照片上傳功能（使用WebDAV上傳至雲端）

### 2024/2/18:
- **新增**: 評論系統與富文本編輯器
- **優化**: 部分頁面資料取得方式、頁面UI設計

### 2024/2/16:
- **新增**: 文章編輯功能、用戶主頁功能
- **優化**: 部分頁面UI設計

### 2024/2/15:
- **新增**: 搜尋系統

### 2024/2/14:
- **新增**: 找回密碼功能
- **優化**: 部分功能冗長的代碼

### 2024/2/12:
- **新增**: 帳號信箱驗證代碼優化，添加已註冊用戶驗證功能、設定用戶寄件限制數量、自動清理過期token

### 2024/2/11:
- **新增**: 帳號信箱驗證功能

### 2024/2/10:
- **新增**: 檢視文章、所有文章分頁排列功能、錯誤提示頁面

### 2024/2/9:
- **新增**: 發布文章功能
- **優化**: 用戶資料頁面排版

### 2024/2/8:
- **新增**: 用戶個人資料更新功能
- **優化**: Controller部分代碼邏輯，部分代碼移動到Service層

### 2024/2/7:
- **新增**: 登入成功歡迎頁面、利用session對首頁自訂化提示
- **優化**: 主頁面的排版以及在小螢幕上的適配
- **修復**: 用戶信箱不唯一的錯誤

### 2024/2/6:
- **新增**: 配置所需的功能pom.xml設定、登入系統頁面以及功能實現
